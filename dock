#!/bin/bash
readonly ScriptVersion="0.2"
readonly PROGDIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
readonly PROGNAME=$(basename $0)
readonly ARGS="$@"

[[ $# -eq 0 ]] && {
    # no arguments
    echo "Usage: $PROGNAME {deploy|prod|loc|version}"
    exit 1;
}
function deploy(){
    $PROGDIR/lib/bin/deploy $2 $3 $4
}
function prodInstall(){
    $PROGDIR/lib/bin/prod
}
function devInstall() {
    $PROGDIR/lib/bin/dev
}
case "$1" in
    -p|--prod|prod    )     prodInstall ;;
    -d|--deploy|deply )     deploy $ARGS ;;
    -l|--local|loc    )     devInstall $ARGS ;;
    -v|--version      )
        echo "Dependencies Versions:"
        nginx -v
        unzip -v
        node --version
        ruby --version
        mosh --version
        tig --version
        htop --version
        tree --version
        emacs --version
        git --version
        ntpd --version
        bundle show
        npm ls -g --depth=0
        varnishlog
        exit 1;
        ;;
esac
unset prodInstall
unset devInstall
unset deploy
exit 0